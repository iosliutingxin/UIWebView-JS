"use strict";function onFinishRenderDirective($timeout){return{restrict:"AE",link:function(scope){scope.$last===!0&&$timeout(function(){pages.banner_init(),pages.submit_init(),$(".load-dialog").remove(),setTimeout(function(){myScroll.refresh()},500)})}}}function showDiv(div,titile){var divName=div+"-content",title="";"expenseInvoice"==div?title="费用说明":"attention"==div?title="预订须知":"tips"==div?title="温馨提示":(title="签证",$("#iframeOutside").html('<iframe class="childrenPages-content-iframe" src=\''+iframeSrc+"' style='display:block'></iframe>")),$("header").children(".fl").attr("href","javascript:hideDiv('"+div+"')"),$("header").children(".title").children("h1").html(title),$("#"+divName).addClass("childrenPages-show"),$("header").addClass("childrenPages-show"),setTimeout(function(){$("#custiom-detail").hide(),$(".white-footer").hide()},800)}function hideDiv(div){var divName=div+"-content";"visa"==div&&$("#iframeOutside").html(" "),$("header").children(".fl").attr("href",headerBackUrl),$("#"+divName).removeClass("childrenPages-show"),$("header").removeClass("childrenPages-show"),setTimeout(function(){$("#custiom-detail").show(),$(".white-footer").show()},100)}function andriodGoBack(){$("#expenseInvoice-content").hasClass("childrenPages-show")?hideDiv("expenseInvoice"):$("#attention-content").hasClass("childrenPages-show")?hideDiv("attention"):$("#tips-content").hasClass("childrenPages-show")?hideDiv("tips"):$("#visa-content").hasClass("childrenPages-show")?hideDiv("visa"):(pages.removeLocalStorage(),null===ProductListURL?window.location.href="https://mdingzhi.uzai.com/":window.location.href=ProductListURL)}function productDetailResize(){var html=document.documentElement,windowWidth=html.clientWidth;html.style.fontSize=windowWidth/7.5+"px";var fixFooterHeight=$("footer").height(),windowHeight=$(window).height();$("#custiom-detail").height(windowHeight-fixFooterHeight),myScroll.refresh()}var uzaiApp=angular.module("uzaiApp",[]);api.__asyncLoadingCode__="0";var myScroll,headerBackUrl=$("header").children("fl").attr("href"),ProductListURL=api.getLocalStorage("ProductListURL"),iframeSrc="",submitUrl={url:"../order/index.html",departureCityName:"",arrivalCityName:"",departureCityId:"",arrivalCityId:"",days:"",productId:""},devicetype=api.getQueryString("devicetype");uzaiApp.controller("productInfo",function($http,$scope){var param=JSON.stringify({ProductID:api.getQueryString("ProductID")});"ios"==devicetype||"android"==devicetype?$scope.isApp=!0:$scope.isApp=!1,$scope.share=function(){var shareParam=encodeURI(JSON.stringify({Url:"https://mdingzhi.uzai.com/product/detail.html?ProductID="+$scope.values.ProductID,Title:$scope.values.ProductName,ImageUrl:$scope.values.ProductImages.ImgPath,Content:$scope.values.ProductName}));"ios"==devicetype?api.invoke("action.share",shareParam):"android"==devicetype&&window.action.exec("share",shareParam)},api.post($http,$scope,api.path.dingzhilogic,"UzaiProduct","GetProductInfo",param,function(obj){if(200==obj.ErrorCode||-3==obj.ErrorCode)if(-3==obj.ErrorCode&&(api.toast("网络连接失败,请重试～"),$(".load-dialog").remove()),$scope.values=JSON.parse(obj.JsonResult),"获取产品详情失败!"==obj.ErrorMsg)api.toast("获取产品详情失败！"),$(".load-dialog").remove(),$scope.values.CityName="上海";else{for(var schedule=new Array,i=0;i<$scope.values.UzaiProductJouneryInfos.length;i++)schedule[i]=$scope.values.UzaiProductJouneryInfos[i];submitUrl.departureCityName=$scope.values.CityName,submitUrl.arrivalCityName=$scope.values.LocationName,submitUrl.departureCityId=$scope.values.CityID,submitUrl.arrivalCityId=$scope.values.LocationID,submitUrl.days=$scope.values.UzaiProductJouneryInfos.length,submitUrl.productId=$scope.values.ProductID,$scope.schedule=schedule,iframeSrc=$scope.values.VisaExtendUrl,""!=$.trim(iframeSrc)&&null!==iframeSrc&&void 0!=iframeSrc&&"undefined"!=iframeSrc&&"#"!=iframeSrc||$(".visa").hide(),$("title").html($scope.values.ProductName+"_优定制_悠哉优定制旅游-众信悠哉旅游")}else api.toast(obj.ErrorMsg,99999),$(".load-dialog").remove()},3)}),uzaiApp.directive("onFinishRender",onFinishRenderDirective),uzaiApp.filter("trustHtml",function($sce){return function(input){if(void 0!=input){var txt=input.replace(/\r/g,"</br>");return txt.replace(/\n/g,"&nbsp;"),$sce.trustAsHtml(txt)}return $sce.trustAsHtml(input)}}),uzaiApp.filter("trustAsResourceUrl",["$sce",function($sce){return function(val){return $sce.trustAsResourceUrl(val)}}]);var pages={removeLocalStorage:function(){api.removeLocalStorage("productId"),api.removeLocalStorage("isCompany"),api.removeLocalStorage("days"),api.removeLocalStorage("arrivalCityName"),api.removeLocalStorage("arrivalCityId"),api.removeLocalStorage("ProductListURL"),api.removeLocalStorage("locationName1"),api.removeLocalStorage("pgoWith"),api.removeLocalStorage("photelInfo"),api.removeLocalStorage("pminDays"),api.removeLocalStorage("pminPerson"),api.removeLocalStorage("pyuSuan"),api.removeLocalStorage("productDepartureCityName")},layout_init:function(){function showFixNav(){var num=this.y;-10>num?$(".detail-images-bottom").addClass("detail-images-bottom-animate"):$(".detail-images-bottom").removeClass("detail-images-bottom-animate"),-2e3>num?$(".gotoTop").show():$(".gotoTop").hide()}var fixFooterHeight=$("footer").height(),windowHeight=$(window).height();$("#custiom-detail").height(windowHeight-fixFooterHeight),myScroll=new window.IScroll("#custiom-detail",{mouseWheel:!0,probeType:2,click:!0,disableMouse:!0,disablePointer:!0}),myScroll.on("scroll",showFixNav),myScroll.on("scrollEnd",showFixNav),$(".gotoTop").on("click",function(){myScroll.scrollTo(0,0,500),$(".gotoTop").hide()}),$(".expenseInvoice").on("click",function(){$("#expenseInvoice-content").hasClass("childrenPages-content")?hideDiv("expenseInvoice"):showDiv("expenseInvoice")}),$(".attention").on("click",function(){$("#attention-content").hasClass("childrenPages-content")?hideDiv("attention"):showDiv("attention")}),$(".tips").on("click",function(){$("#tips-content").hasClass("childrenPages-content")?hideDiv("tips"):showDiv("tips")}),$(".visa").on("click",function(){$("#visa-content").hasClass("childrenPages-content")?hideDiv("visa"):showDiv("visa")})},banner_init:function(){for(var i=0;i<$("[banner]").length;i++){var varname="var"+i;window[varname]={};var n=i+1;window[varname]=new Swiper(".swiper-wrapper-"+n,{loop:!0,touchAngle:20,lazyLoading:!0,pagination:".swiper-pagination-"+n})}},Telephone_init:function(){$("#Telephone").attr("href","tel:4009982060")},backBtn_init:function(){$(".detail-btn-back").on("click",function(){pages.removeLocalStorage()}),null===ProductListURL?$(".detail-btn-back,.detail-btn-back-big").attr("href","https://mdingzhi.uzai.com/"):$(".detail-btn-back,.detail-btn-back-big").attr("href",ProductListURL)},submit_init:function(){var departureCityEncode=encodeURI(submitUrl.departureCityName).toString(),arrivalCityEncode=encodeURI(submitUrl.arrivalCityName).toString();api.setLocalStorage("productDepartureCityName",departureCityEncode),api.setLocalStorage("arrivalCityName",arrivalCityEncode),api.setLocalStorage("days",submitUrl.days),api.setLocalStorage("departureCityId",submitUrl.departureCityId),api.setLocalStorage("arrivalCityId",submitUrl.arrivalCityId),api.setLocalStorage("productId",submitUrl.productId),$(".confirm").attr("href",submitUrl.url)}};angular.element(document).ready(function(){pages.layout_init(),pages.Telephone_init(),pages.backBtn_init()}),window.andriodGoBack=andriodGoBack,window.androidGoBack=andriodGoBack,window.addEventListener("orientationchange",function(){productDetailResize()},!1);