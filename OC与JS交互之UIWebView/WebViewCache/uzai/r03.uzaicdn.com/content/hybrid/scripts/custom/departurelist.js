"use strict";function itemclick(){$(".item").on("click",function(obj){submitUrl.cityid=$(this).attr("data-id"),submitUrl.cityName=$(this).html(),submitUrl.cityName=submitUrl.cityName,setadr.init(submitUrl.cityName),setadr.xianshi()})}function orderIndexResize(){var fixFooterHeight=$(".search").height()+$(".dmhd").height(),windowHeight=$(window).height();$("#destlist").height(windowHeight-fixFooterHeight),$("#wrapper").height($(window).height()-$("header").eq(0).height()+5),myScroll.refresh(),myScroll2.refresh()}var city=[],myScroll,myScroll2,submitUrl={url:"https://mdingzhi.uzai.com/hybrid/order/index.html",cityName:"",cityid:""};window.baiduLocation="";var udingzhitype=api.getQueryString("udingzhitype");$.fn.departurelist=function(){function printHtml(){for(var i=0;i<letter.length;i++)for(var x=0;x<starting_list.length;x++)starting_list[x]["class"]==letter[i]&&ul.children("li").each(function(){$(this).attr("data-flag")==starting_list[x]["class"]&&$(this).append("<div class='item' data-city='"+starting_list[x].city+"' data-id='"+starting_list[x].id+"' >"+starting_list[x].txt+"</div>")});ul.children("li").each(function(){return $(this).find(".item").length<1?void $(this).remove():void $(this).find(".item").each(function(){var txt=$(this).html(),id=$(this).attr("data-id"),citytxt=$(this).attr("data-city");city.push(txt+"-"+id+"-"+citytxt)})})}function loaded(){var fixFooterHeight=$(".search").height()+$(".spani").height(),windowHeight=$(window).height();$("#destlist").height(windowHeight-fixFooterHeight),myScroll=new IScroll("#destlist",{snap:"li",probeType:2,click:!0,disableMouse:!0,disablePointer:!0}),myScroll.on("scroll",staticTitle),myScroll.on("scrollEnd",staticTitle)}function load1(){$("#wrapper").height($(window).height()-$("header").eq(0).height()+5),myScroll2=new IScroll("#wrapper",{probeType:2,click:!0,disableMouse:!0,disablePointer:!0})}function staticTitle(){var num=this.currentPage.pageY,text=$(".list").children("li").eq(num).children(".title").html();group_title.html(text);var height=$(".localcity").height();this.y<-1*height?group_title.show():group_title.hide()}function createdNav(){destlist_catalogues.html("");for(var i=0;i<ul.children("li").length;i++){if(!ul.children("li").eq(i).children(".title").html())return!1;destlist_catalogues.append("<b data-page='"+i+"'>"+ul.children("li").eq(i).children(".title").html()+"</b>")}destlist_catalogues.delegate("b","click",function(){myScroll.goToPage(0,$(this).attr("data-page"),1e3),myScroll.on("scroll",staticTitle),myScroll.on("scrollEnd",staticTitle)})}function updateStatus(message){$(".localcity-city").html(message)}function showPosition(position){var latitude=position.coords.latitude,longitude=position.coords.longitude,point=new BMap.Point(longitude,latitude),gc=new BMap.Geocoder;gc.getLocation(point,function(rs){var locationCity=rs.addressComponents.city.replace(/市/g,"");window.baiduLocation=locationCity,$(".localcity-city").html("当前城市：<em>"+locationCity+"</em>")})}function handleLocationError(error){switch(error.code){case 0:updateStatus("尝试获取您的位置信息时发生错误："+error.message);break;case 1:updateStatus("用户拒绝了获取位置信息请求。");break;case 2:updateStatus("浏览器无法获取您的位置信息："+error.message);break;case 3:updateStatus("获取您位置信息超时。");break;default:updateStatus("获取您位置信息超时。")}}function getCookie(name){var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");return(arr=document.cookie.match(reg))?decodeURI(arr[2]):null}function locationCitys(){if("ios"==api.getQueryString("devicetype")||"android"==api.getQueryString("devicetype")){var appcity=api.getLocalStorage("departureCityName");return appcity=decodeURI(appcity),appcity.indexOf("省")>0?appcity=appcity.replace(/省/g,""):appcity.indexOf("市")>0&&(appcity=appcity.replace(/市/g,"")),$(".localcity-city").html("当前城市：<em>"+appcity+"</em>"),!1}if(null!=api.getCookie("uzmCity")&&"ios"!=devicetype&&"android"!=devicetype){var city=getCookie("uzmCity").toString().split("-");$(".localcity-city").html("当前城市：<em>"+decodeURI(city[0])+"</em>")}else{if(!navigator.geolocation)return!1;navigator.geolocation.getCurrentPosition(showPosition,handleLocationError,{enableHighAccuracy:!0,timeout:1e3,maximumAge:0})}}var group_title=$("#list_group_title"),destlist_catalogues=$(".destlist-catalogues"),ul=$(".list"),starting_list=[];starting_list=1==udingzhitype?[{"class":"B",id:"1",city:"bj",txt:"北京"},{"class":"S",id:"2",city:"sh",txt:"上海"}]:[{"class":"B",id:"1",city:"bj",txt:"北京"},{"class":"C",id:"165",city:"cd",txt:"成都"},{"class":"C",id:"257",city:"cc",txt:"长春"},{"class":"C",id:"190",city:"cs",txt:"长沙"},{"class":"C",id:"68",city:"cz",txt:"常州"},{"class":"C",id:"4",city:"cq",txt:"重庆"},{"class":"D",id:"31",city:"dl",txt:"大连"},{"class":"H",id:"19",city:"hz",txt:"杭州"},{"class":"H",id:"238",city:"hf",txt:"合肥"},{"class":"H",id:"125",city:"heb",txt:"哈尔滨"},{"class":"J",id:"115",city:"jn",txt:"济南"},{"class":"N",id:"57",city:"nj",txt:"南京"},{"class":"N",id:"22",city:"nb",txt:"宁波"},{"class":"N",id:"83",city:"nc",txt:"南昌"},{"class":"Q",id:"116",city:"qd",txt:"青岛"},{"class":"S",id:"2",city:"sh",txt:"上海"},{"class":"S",id:"29",city:"sy",txt:"沈阳"},{"class":"S",id:"8",city:"sjz",txt:"石家庄"},{"class":"S",id:"60",city:"szh",txt:"苏州"},{"class":"T",id:"3",city:"tj",txt:"天津"},{"class":"T",id:"94",city:"ty",txt:"太原"},{"class":"T",id:"12",city:"ts",txt:"唐山"},{"class":"W",id:"43",city:"wh",txt:"武汉"},{"class":"W",id:"58",city:"wx",txt:"无锡"},{"class":"X",id:"135",city:"xm",txt:"厦门"},{"class":"X",id:"286",city:"xa",txt:"西安"},{"class":"Z",id:"204",city:"zz",txt:"郑州"}];var letter=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];document.addEventListener("touchmove",function(e){e.preventDefault()},!1),printHtml(),createdNav(),loaded(),locationCitys(),load1()},$.fn.querycity=function(){function search(val){if(val){input.val(input.val().toLowerCase());for(var search_a=[],i=0;i<city.length;i++){var item=city[i];item.indexOf(val)>-1&&search_a.push(item)}for(var search_b=[],i=0;i<search_a.length;i++){var item=search_a[i];search_b.push('<div class="item" data-city=\''+item.split("-")[2]+"' data-id='"+item.split("-")[1]+"' >"+item.split("-")[0]+"</div>")}search_b.length>0?($("body").children(".list-group-search-error,.list-group-search").remove(),$("body").append('<div class="list-group list-group-search">'+search_b.join("")+"</div>"),itemclick()):($("body").children(".list-group-search-error,.list-group-search").remove(),$("body").append('<div class="list-group list-group-search-error">抱歉～没有搜索到城市～</div>'))}else cityListShow()}function cityListHide(){group_title.hide(),destlist_catalogues.hide(),destlist.hide()}function cityListShow(){$(".list-group-search").remove(),group_title.hide(),destlist_catalogues.show(),destlist.show()}var input=$(this),group_title=$("#list_group_title"),destlist_catalogues=$(".destlist-catalogues"),destlist=$("#destlist");""==$.trim(input.val())?cityListShow():(cityListHide(),search(input.val().toLowerCase()))};var setadr={init:function(departureCity){$("#startCityName1").text(departureCity),$("#startCityName2").text(departureCity)},xianshi:function(){0==isCompany?($(".content2").css("right","100rem"),$(".content1").show(),$(".xuanze").hide(),$(".acus").hide(),$(".pcus").show(),$(".pgerenxinxi").hide(),$(".agerenxinxi").hide()):1==isCompany&&($(".content2").css("right","100rem"),$(".content1").show(),$(".xuanze").hide(),$(".pcus").hide(),$(".acus").show(),$(".pgerenxinxi").hide(),$(".agerenxinxi").hide());var group_title=$("#list_group_title"),destlist_catalogues=$(".destlist-catalogues"),destlist=$("#destlist");$(".list-group-search,.list-group-search-error").remove(),group_title.hide(),destlist_catalogues.show(),destlist.show(),""!=$.trim($(".search-input ").val())&&$(".search-input ").val("")}};window.addEventListener("orientationchange",function(){orderIndexResize()},!1);