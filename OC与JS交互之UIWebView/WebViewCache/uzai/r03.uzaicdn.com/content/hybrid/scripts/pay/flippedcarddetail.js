"use strict";!function(window){function androidGoBack(){window.history.go(-1)}api.__asyncLoadingCode__="0",window.androidGoBack=androidGoBack;var $app=angular.module("detailApp",[]);$app.controller("detailController",function($scope,$http){function LodeTransData(pageIndex){var _param=JSON.stringify({UserId:_userId,CouponCode:api.getQueryString("cardNo"),PageIndex:pageIndex,PageSize:20});$scope.isshow=!0,api.post($http,$scope,api.path.mpaylogic,"FlippedCard","Detail",_param,function(obj){if(200===obj.ErrorCode||-3===obj.ErrorCode){if(-3===obj.ErrorCode)api.toast(obj.ErrorMsg);else if($scope.tranResult=JSON.parse(obj.JsonResult),200===$scope.tranResult.Code)if(null===$scope.tranList||"undefined"===$scope.tranList||"undefined"==typeof $scope.tranList)null===$scope.tranResult.Result.TransList||0===$scope.tranResult.Result.TransList.length?$scope.isLode=!1:$scope.tranResult.Result.TransList.length>0&&$scope.tranResult.Result.TransList.length<19&&($scope.isLode=!1,$scope.isshow=!1),$scope.tranList=$scope.tranResult.Result.TransList;else{(null===$scope.tranResult.Result.TransList||$scope.tranResult.Result.TransList.length<20)&&($scope.isLode=!1);for(var i=0;i<$scope.tranResult.Result.TransList.length;i++)$scope.tranList.push($scope.tranResult.Result.TransList[i])}else 0===$scope.tranResult.Code?$scope.isLode=!1:api.toast($scope.tranResult.Message);api.endloading()}else api.endloading(),api.toast(obj.ErrorMsg)},0,!1)}var _userId=api.getUser().userId;return _userId&&"undefined"!=typeof _userId?($scope.isLode=!0,$scope.pageIndex=0,LodeTransData(0),$scope.LodeMore=function(){$scope.pageIndex=$scope.pageIndex+20,LodeTransData($scope.pageIndex)},void($scope.goback=function(){window.location.href="https://mhome.uzai.com/hybrid/flippedcard/flippedcardlist.html?cardType="+api.getQueryString("cardType")})):void api.login(window.location.href,window.location.href)})}(window);